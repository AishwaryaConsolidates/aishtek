<!DOCTYPE html>
<html lang="en-US">
<head>
	<title>Cognito Auth JS SDK Sample</title>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="styleSheetStart.css">
	<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
	<script src="js/amazon-cognito-auth.min.js"></script>
	<!-- To enable the advanced security feature -->
	<!-- <script src="https://amazon-cognito-assets.<region>.amazoncognito.com/amazon-cognito-advanced-security-data.min.js"></script> -->
	<!-- E.g. -->
	<!-- <script src="https://amazon-cognito-assets.us-east-1.amazoncognito.com/amazon-cognito-advanced-security-data.min.js"></script> -->
</head>

<body>
	<ul>
	  <li><a href="https://aws.amazon.com/cognito/" target="_blank"
           title="Go to AWS Cognito Console">Cognito Console</a></li>
	  <li><a href="http://docs.aws.amazon.com/cognito/latest/developerguide/what-is-amazon-cognito.html"
           target="_blank" title="See Cognito developer docs">Docs</a></li>
	</ul>

	<h1>
		<a href="http://docs.aws.amazon.com/cognito/latest/developerguide/what-is-amazon-cognito.html" target="_blank">
			<img src="img/MobileServices_AmazonCognito.png" alt="Amazon Cognito" title="Amazon Cognito"
           style="width:144px;height:144px;"></a><br>
		Amazon Cognito Auth Demo
	</h1>

	<div class="centeredText">
		<p id="introPara" title="About this demo">
      This sample web page demonstrates how to use the Amazon Cognito Auth SDK for JavaScript.
      This SDK simplifies adding sign-up, sign-in functionality in your apps.
      With this SDK, you can use Cognito User Poolsâ€™ app integration and federation features,
      with a customizable UI hosted by AWS to sign up and sign in users, and with built-in federation
      for external identity providers via SAML.
      To learn more
      see our <a href="http://docs.aws.amazon.com/cognito/latest/developerguide/what-is-amazon-cognito.html">Developer Guide</a>.<br>
      <br>
      This sample will initialize a CognitoAuth object and initiate the sign up / sign in flow.
      You will need to substitute your own Cognito User Pool configuration values to make it work.
      Look at the source for this page and read the comments to learn more.
      You can also view the README.md of this sample page and the README.md of the Cognito Auth JavaScript SDK.
		</p>
	</div>

  <div><br></div>
  <div>
      <p id="statusNotAuth" title="Status">
          Sign-In to Continue
      </p>
      <p id="statusAuth" title="Status">
          You have Signed-In
      </p>
  </div>

	<div class="tabsWell">
		<div id="startButtons">
			<div class="button">
				<a class="nav-tabs" id="signInButton" href="javascript:void(0)" title="Sign in">Sign In</a>
			</div>
		</div>
		<div class="tab-content">
			<div class="tab-pane" id="userdetails">
				<p class="text-icon" title="Minimize" id="tabIcon" onclick="toggleTab('usertab');">_</p>
				<br>
				<h2 id="usertabtitle">Tokens</h2>
				<div class="user-form" id="usertab">
					<pre id="idtoken"> ... </pre>
          <pre id="acctoken"> ... </pre>
          <pre id="reftoken"> ... </pre>
				</div>
			</div>
		</div>
	</div>
	<script src="js/config.js"></script>
	<script src="js/aishtrack.js"></script>
	<script>
	$(function () {
		onLoad();	
	});
	// Operations when the web page is loaded.
	function onLoad() {

		// Initiatlize CognitoAuth object
		var auth = initCognitoSDK();

		var curUrl = window.location.href;
		auth.parseCognitoWebResponse(curUrl);
	}

  // Initialize a cognito auth object.
	function initCognitoSDK() {
		var authData = {
				ClientId : '33i51jtcqrisallfq09ddfoc1e', // Your client id here
				AppWebDomain : 'aishtek.auth.ap-south-1.amazoncognito.com',
				TokenScopesArray : ['email', 'openid', 'phone'], // e.g.['phone', 'email', 'profile','openid', 'aws.cognito.signin.user.admin'],
				RedirectUriSignIn : htmlURLBase + '/index.html',
				RedirectUriSignOut : htmlURLBase + '/products.html',
/*         				IdentityProvider : '<TODO: add identity provider you want to specify>', // e.g. 'Facebook', */
				UserPoolId : 'ap-south-1_jiWBJIz70', // Your user pool id here
				AdvancedSecurityDataCollectionFlag : 'false', // e.g. true
			    //Storage: 'LocalStorage' // OPTIONAL e.g. new CookieStorage(), to use the specified storage provided
			};
		var auth = new AmazonCognitoIdentity.CognitoAuth(authData);
		// You can also set state parameter 
		// auth.setState(<state parameter>);  
		auth.userhandler = {
			onSuccess: function(result) {
				alert("Sign in success");
				showSignedIn(result);
			},
			onFailure: function(err) {
				alert("Error!" + err);
			}
		};
		// The default response_type is "token", uncomment the next line will make it be "code".
		// auth.useCodeGrantFlow();
		return auth;
	}
	</script>
</body>
</html>